<!DOCTYPE html>
<html lang="en">
<head>
  <meta http-equiv="Content-Type" content="text/html; charset=utf-8">
  <title>CSS Masking</title>
  <link rel=contents href="#contents">
  <link rel=index href="#index">
  <link rel="stylesheet" type="text/css" href="default.css">
  <link rel="stylesheet" type="text/css"
        href="http://www.w3.org/StyleSheets/TR/W3C-ED.css">
  <style>
  .todo {
      border-left: 0.5em solid #f44;
      padding-left: 1em;
      margin-top: 0.5em;
      background: #FBE9E9;
  }
  
  .todo:before {
      content: "TO DO ";
      color: #f44;
  }
 </style>
  </style>
</head>

<div class="head">
<!--logo-->

<h1>CSS Masking</h1>

<h2 class="no-num no-toc">[LONGSTATUS] [DATE]</h2>
<dl>
  <dt>This version:
    <dd><a href="http://dvcs.w3.org/hg/FXTF/raw-file/tip/masking/index.html">http://dvcs.w3.org/hg/FXTF/raw-file/tip/masking/index.html</a>
    <!--http://www.w3.org/TR/[YEAR]/WD-[SHORTNAME]-[CDATE]/-->

  <dt>Latest version:
    <dd><a href="http://www.w3.org/TR/css-masking/">[LATEST]</a>

  <dt>Editor's draft:
    <dd><a href="http://dvcs.w3.org/hg/FXTF/raw-file/tip/masking/index.html">http://dvcs.w3.org/hg/FXTF/raw-file/tip/masking/index.html</a>

  <dt>Editors:
    <dd class="h-card vcard">
      <a class="p-name fn u-url url" rel="author"
         href="[editor1 personal URL (opt.)]">[editor1 name]</a>,
      <span class="p-org org">[affiliation (opt.)]</span>,
      <span class="u-email email">[email address (opt.)]</span>
</dl>

<!--copyright-->

<hr title="Separator for header">
</div>

<h2 class="no-num no-toc" id="abstract">Abstract</h2>

<p>CSS Masking describes how to use another graphical element or image as a lumniance or alpha mask.
  Typically, rendering an element via CSS or SVG can conceptually described as if the element,
  including its children, are drawn into a buffer (such as a raster image) and then that buffer is composited
  into the elements parent. Luminance or alpha masks influence the transperency of this buffer before the compositing stage.

<h2 class="no-num no-toc" id="status">Status of this document</h2>

<!--status-->

<h2 class="no-num no-toc" id="contents">
Table of contents</h2>

<!--toc-->

<h2 id="intro">
  Introduction
</h2>

<p>
  With CSS Masking it is possible to specify another graphics element or file
  to be used as an luminance or alpha mask for compositing the current object into the
  background.
</p>

<p>
  A mask is applied using the 'mask' or 'mask-image' property.
  The mask source may be defined using a <a>'mask element'</a> element referenced
  by the 'mask' property.
  Alternatively, for many simple uses, the 'mask-image' property may
  refer directly to graphical elements or images to be used as mask
  forgoing the need for an explicit <a>'mask element'</a> element. The
  'mask' property is also a shorthand for other masking properties.
</p>

<p>
  The effect of applying a mask is as if the mask images or mask source elements are
  rendered into an offscreen image which has been initialized to transparent
  black.
  The graphical object to which the mask is applied
  will be painted onto the background through the
  mask, thus completely or partially masking out parts of the graphical
  object.
</p>

<div class="example">
  <p>
    Following example uses an image to mask a rectangle.
  </p>
  <img src="images/masking/mask01.png" alt="Example Mask">
  <br>
  <p><a href="images/masking/mask01.svg">View this example</a> as SVG</p>
</div>

<h2 id="placement">Module interactions</h2>

<p>This specification defines a set of CSS properties that affect the visual rendering of elements to which
  those properties are applied; these effects are applied after elements have been sized and positioned according
  to the <a href="http://www.w3.org/TR/CSS2/visuren.html" title="Visual formatting model">Visual formatting model</a>
  from [[!CSS21]]. Some values of these properties result in the creation of a <a href="http://www.w3.org/TR/CSS2/visuren.html#containing-block" title="Visual formatting model">containing block</a>, and/or the creation of a <a href="http://www.w3.org/TR/CSS2/visuren.html#z-index" title="Visual formatting model">stacking context</a>.
</p>

<p>Defintions of CSS properties and values in this specification comply with CSS Backgrounds and Borders [[CSS3BG]].</p>

<h2 id="values">Values</h2>

<p>This specification follows the <a href="http://www.w3.org/TR/CSS21/about.html#property-defs">CSS property definition conventions</a> from [[!CSS21]]. Value types not defined in this specification are defined in CSS Level 2 Revision 1 [[!CSS21]]. </p>

<p>In addition to the property-specific values listed in their definitions, all properties defined in this specification also accept the <a href="http://www.w3.org/TR/CSS21/cascade.html#value-def-inherit">inherit</a> keyword as their property value. For readability it has not been repeated explicitly.

<h2 id="definitions">Definitions</h2>

<p>
  When used in this specification, terms have the meanings assigned in this section.
</p>

<dl>
<dt id="TermClientBoundingRect"><dfn>bounding client rect</dfn></dt>
<dd>
  <p>
    The union of all border boxes for the element that has an associated CSS layout box and is not
    in the <code>http://www.w3.org/2000/svg</code> namespace and it's descendant elements. Or the
    object bounding box [[!SVG11]], if the element does not have
    an associated CSS layout box and is in the <code>http://www.w3.org/2000/svg</code> namespace
    (See <a href="http://www.w3.org/TR/cssom-view/#dom-element-getboundingclientrect">getBoundingClientRect</a>
    [<a href="#ref-CSSOM">CSSOM</a>]).
  </p>
</dd>
<dt id="TermLocalCoordinateSystem"><dfn>local coordinate system</dfn></dt>
<dd>
  <p>
    In general, a coordinate system defines locations and distances on the current
    canvas. The current local coordinate system (also user coordinate system) is the
    coordinate system that is currently active and which is used to define how
    coordinates and lengths are located and computed, respectively, on the current
    canvas [[CSS3-TRANSFORMS]].
  </p>
  <p>
    For elements that have an associated CSS layout box, the current user coordinate system has its origin at
    the top-left corner of the <span class="term">bounding client rect</span> and one unit equals one CSS pixel.
    The viewport for resolving percentage values is defined by the width and height of the
    <span class="term">bounding client rect</span>.
  </p>
  <p>
    If the element does not have an associated CSS layout box and is in the <code>http://www.w3.org/2000/svg</code>
    namespace, the current local coordinate system has its origin at the top-left corner of the element's
    nearest viewport.
  </p>
</dd>
<dt id="TermUserCoordinateSystem"><dfn>user coordinate system</dfn></dt>
<dd>
  See definition of <span class="term">local coordinate system</span>.
</dd>
<dt id="TermObjectBoundingBoxUnits"><dfn>object bounding box units</dfn></dt>
<dd>
  The <span class="term">bounding client rect</span> defines the coordinate system in which to resolve values, as defined in <a>object bounding box units</a> [[!SVG11]].
</dd>
<dt id="TermMask"><dfn>mask</dfn></dt>
<dd>
  An offscreen image which has been initialized to transparent
  black.
  The graphical object to which the mask is applied
  will be painted onto the background through the
  mask, thus completely or partially masking out parts of the graphical
  object.
</dd>
<dt id="TermMask"><dfn>mask source</dfn></dt>
<dd>
  A mask defined by a <a>'mask element'</a> element.
</dd>
</dl>

<h2>The Mask Rendering Model</h2>

<p>The application of the 'mask' or 'mask-image' properties to an element formatted with the CSS box model establishes a pseudo-stacking-context the same way that CSS 'opacity' does, and all the element's descendants are rendered together as a group with the masking applied to the group as a whole.

<p>The 'mask' and 'mask-image' properties have no effect on the geometry of the target element's CSS boxes.

<p>The compositing model follows the SVG compositing model [[!SVG11]]: first any filter effect is applied, then any clipping, masking and opacity. These effects all apply after any other CSS effects such as 'border'. As per SVG, the application of 'mask' or 'mask-image' has no effect on hit-testing.

<h3 id="layering">Layering Multiple Mask Images</h3>

<p>The mask of a box can have multiple <span
class=index>layers</span>. The number
of layers is determined by the number of comma-separated values in the
'mask-image' property. Note that a value of 'none' still creates
a layer.

<p>Each of the images is sized, positioned, and tiled according to
the corresponding value in the other mask properties. The lists
are matched up from the first value: excess values at the end are not
used. If a property doesn't have enough comma-separated values to match
the number of layers, the <span>UA</span> must calculate its used
value by repeating
the list of values until there are enough.

<div class="example">
<p>For example, this set of declarations:
<pre>
mask-image: url(flower.png), url(ball.png), url(grass.png);
mask-position: center center, 20% 80%, top left, bottom right;
mask-origin: border-box, content-box;
mask-repeat: no-repeat;
</pre>
<p>has exactly the same effect as this set with the extra position
dropped and the missing values for 'mask-origin' and
'mask-repeat' filled in (emphasized for clarity):
<pre>
mask-image: url(flower.png), url(ball.png), url(grass1.png);
mask-position: center center, 20% 80%, top left;
mask-origin: border-box, content-box<strong>, border-box</strong>;
mask-repeat: no-repeat<strong>, no-repeat, no-repeat</strong>;
</pre>
</div>

<p>The first image in the list is the layer closest to the user,
the next one is painted behind the first, and so on. All mask images
are combined by compositing on the <span class=index>mask</span>.

<h3 id="MaskValues">Calculating mask values</h3>

<p>
A mask may be interpreted using one of two different methods with regards
to calculating the mask values that will be multiplied with the target alpha
values.
</p>

<p>
The first and simplest method of calculating the mask values is to use the alpha
channel of the mask source.
In this case the mask value at a given point is simply the value of the alpha channel at that point.
The color channels do not contribute to the mask value.
</p>

<p>
The second method of calculating the mask values is to use the luminance of the mask source.
In this case the mask value at a given point is computed from the color channel values and alpha channel value using the following procedure.
</p>

<ol>
<li>Compute a luminance value from the color channel values.
  <ul>
    <li>
    If the computed value of 'color-interpolation' on the <a>'mask element'</a> element is 'linearRGB', convert the
  original image color values (potentially in the sRGB color space) to the linear
  RGB color space (see <a
    href="painting.html#RenderingProperties">Rendering properties</a>).
    </li>
    <li>Then, using non-premultiplied RGB color values, apply the
    luminance-to-alpha coefficients (as defined in the <a>'feColorMatrix'</a>
    filter primitive [[filter-effects]]) to convert the RGB color values to luminance
    values.
    </li>
  </ul>
</li>
<li>Multiply the computed luminance value by the corresponding alpha
value to produce the mask value.</li>
</ol>

<p>Regardless of the method used, the procedure for calculating
mask values assumes the content of the mask is a four-channel RGBA graphics
object.
For other types of graphics objects, special handling is required as
follows.</p>

<p>For a three-channel RGB graphics object that is used in a mask (e.g.,
when referencing a three-channel image file), the effect is as if the object
were converted into a four-channel RGBA image with the alpha channel
uniformly set to 1.</p>

<p>For a single-channel image that is used in a mask (e.g., when
referencing a single-channel grayscale image file), the effect is as if the
object were converted into a four-channel RGBA image, where the single
channel from the referenced object is used to compute the three color
channels and the alpha channel is uniformly set to 1. Note that when
referencing a grayscale image file, the transfer curve relating the
encoded grayscale values to linear light values must be taken into
account when computing the color channels.</p>

<p class="note">Note that SVG <a>graphics elements</a> (e.g., <a>'circle'</a> or <a>'text'</a>)
are all treated as four-channel RGBA images for the purposes
of masking operations.</p>

<p>The effect of a mask is identical to what would have happened if
there were no mask but instead the alpha channel of the given object
were multiplied with the mask's resulting mask values.</p>


<h2 id="the-mask-image">The 'mask-image' property</h2>

<table class="propdef">
    <tr>
      <th>Name:
      <td><dfn>mask-image</dfn>
    <tr>
      <th><a href="#values">Value</a>:
      <td><var>&lt;mask-image&gt;</var>#
    <tr>
      <th>Initial:
      <td>none
    <tr>
      <th>Applies to:
      <td>All elements. In SVG, it applies to <a>container elements</a> and <a>graphics elements</a>
    <tr>
      <th>Inherited:
      <td>no
    <tr>
      <th>Percentages:
      <td>N/A
    <tr>
      <th>Media:
      <td>visual
    <tr>
      <th>Computed value:
      <td>as specified, but with URIs made absolute
    <tr>
      <th>Animatable:
      <td>no
</table>

<p>This property sets the mask image(s) of an element. Images
are drawn with the first specified one on top (closest to the user)
and each subsequent image behind the previous one.
Where

<pre class=prod><dfn><var>&lt;mask-image&gt;</var></dfn> = <var>&lt;image&gt;</var> | none</pre>

<dl>
  <dt><dfn>''<a>&lt;image&gt;</a>''</dfn></dt>
  <dd>
    A 2D image. (See [[!CSS3-IMAGES]].)
  </dd>
  <dt><dfn>''none''</dfn></dt>
  <dd>
    A value of ''none'' counts as an image layer but does not mask the element.
  </dd>
</dl>

<p>A mask image that is empty
(zero width or zero height), that
fails to download, is non-existent or that cannot be displayed (e.g., because it is
not in a supported image format) gets ignored. No masking is applied.

<p>See the section <a href="#layering">“Layering multiple mask
images”</a> for how 'mask-image' interacts with other
comma-separated mask properties to form each mask image
layer.

<p class="note"><a href="http://www.w3.org/TR/media-frags/#naming-space">Media fragments</a>
can be used to use a portion of an image as a mask. The
<a href="http://www.w3.org/TR/css3-images/">CSS Images</a> module
will provide fallback syntax for image formats and include additional
controls for image display.

<div class="example">
<p>Some examples specifying mask images:</p>
<pre>
body { mask-image: linear-gradient(black 0%, transparent 100%) }
p { mask-image: none }
div { mask-image: url(tl.png), url(tr.png) }
</pre>
</div>

<h2 id="the-mask-repeat">The 'mask-repeat' property</h3>

<table class="propdef">
    <tr>
      <th>Name:
      <td><dfn>mask-repeat</dfn>
    <tr>
      <th><a href="#values">Value</a>:
      <td><var>&lt;repeat-style&gt;</var>#
    <tr>
      <th>Initial:
      <td>repeat
    <tr>
      <th>Applies to:
      <td>All elements. In SVG, it applies to <a>container elements</a> and <a>graphics elements</a>
    <tr>
      <th>Inherited:
      <td>no
    <tr>
      <th>Percentages:
      <td>N/A
    <tr>
      <th>Media:
      <td>visual
    <tr>
      <th>Computed value:
      <td>A list, each item consisting of:
        two keywords, one per dimension
    <tr>
      <th>Animatable:
      <td>no
</table>

<p>Specifies how mask images are tiled after they have been
<a href="#the-mask-size">sized</a> and <a href="#the-mask-position">positioned</a>.
Where
<pre class=prod><dfn><var>&lt;repeat-style&gt;</var></dfn> = repeat-x | repeat-y | [repeat | space | round | no-repeat]{1,2}</pre>

<p>Single values for <var>&lt;repeat-style&gt;</var> have the following
meanings:

<dl>
  <dt><dfn>''repeat-x''</dfn>
  <dd>
  Computes to ''repeat no-repeat''.

  <dt><dfn>''repeat-y''</dfn>
  <dd>
  Computes to ''no-repeat repeat''.

  <dt>''repeat''
  <dd>
  Computes to ''repeat repeat''.

  <dt>''space''
  <dd>
  Computes to ''space space''

  <dt>''round''
  <dd>
  Computes to ''round round''

  <dt>''no-repeat''
  <dd>
  Computes to ''no-repeat no-repeat''
</dl>

<p>If a <var>&lt;repeat-style&gt;</var> value has two keywords, the first
one is for the horizontal direction, the second for the vertical one,
as follows:

<dl>
  <dt><dfn title="''repeat''!!'mask-repeat' value">''repeat''</dfn>
  <dd>
  The image is repeated in this direction as often as needed to cover
  the <span class=index>mask painting area</span>.

  <dt><dfn title="''space''!!'mask-repeat' value">''space''</dfn>
  <dd>
  The image is repeated as often as will fit within the
  <span class=index>mask painting area</span> without being
  clipped and then the images are spaced out to fill the area. The
  first and last images touch the edges of the area. If the <span
  class=index>mask painting area</span> is larger than the mask positioning area, then
  the pattern repeats to fill the mask painting area.
  The value of 'mask-position' for this direction
  is ignored, unless there is not enough space for two copies of the
  image in this direction, in which case only one image is placed and
  'mask-position' determines its position in this
  direction.

  <dt><dfn title="''round''!!'mask-repeat' value">''round''</dfn>
  <dd>
  The image is repeated as often as will fit within the
  <span class=index>mask painting area.</span> If it doesn't
  fit a whole number of times, it is rescaled so that it does.
  See the formula under 'mask-size'. If the <span
  class=index>mask painting area</span> is larger than the mask positioning area, then
  the pattern repeats to fill the mask painting area.

  <dt><dfn title="''no-repeat''!!'mask-repeat' value">''no-repeat''</dfn>
  <dd>
  The image is placed once and not repeated in this direction.
</dl>

<p>Unless one of the two keywords is ''no-repeat'', the
whole mask painting area will be tiled, i.e., not just one
vertical strip and one horizontal strip.

<div class="example">
<p style="display:none">Example(s):
<pre>
body {
  mask: url(pendant.png);
  mask-repeat: repeat-y;
  mask-position: center;
}
</pre>
</div>

<div class=example>
  <p style="display:none">Example(s):
  <pre>
body {
  background-color: blue;
  mask-image: url(dot-mask.png);
  mask-type: luminance;
  mask-repeat: space;
}
</pre>

  <div class=figure>
    <p><img src="images/mask-repeat.svg" alt="Image of an element with a dotted mask." width="240" style="border: solid black 1px;">

    <p class=caption>The effect of 'space': the mask image of a dot is
    tiled to cover the whole <span class=index>mask painting area</span> and the mask images are equally
    spaced.
  </div>
</div>

<p>See the section <a href="#layering">“Layering multiple mask
images”</a> for how 'mask-repeat' interacts with other
comma-separated mask properties to form each mask image
layer.

<h2 id="the-mask-attachment">The 'mask-attachment' property</h2>

<table class="propdef">
    <tr>
      <th>Name:
      <td><dfn>mask-attachment</dfn>
    <tr>
      <th><a href="#values">Value</a>:
      <td><var>&lt;attachment&gt;</var>#
    <tr>
      <th>Initial:
      <td>scroll
    <tr>
      <th>Applies to:
      <td>All elements. In SVG, it applies to <a>container elements</a> and <a>graphics elements</a>
    <tr>
      <th>Inherited:
      <td>no
    <tr>
      <th>Percentages:
      <td>N/A
    <tr>
      <th>Media:
      <td>visual
    <tr>
      <th>Computed value:
      <td>as specified
    <tr>
      <th>Animatable:
      <td>no
</table>

<p class=issue>The support for 'mask-attachment' may be removed for SVG.

<p>If mask images are specified, this property specifies whether
they are fixed with regard to the <em class="index">viewport</em>
(<dfn>''fixed''</dfn>) or scroll along with the element (<dfn>''scroll''</dfn>)
or its contents (<dfn>''local''</dfn>). The property's value is given as
a comma-separated list of &lt;attachment&gt; keywords where

<pre class=prod><dfn><var>&lt;attachment&gt;</var></dfn> = scroll | fixed | local</pre>

<dl>
  <dt><dfn>fixed</dfn></dt>
    <dd>The mask is fixed with regard to the viewport. In paged
      media where there is no viewport, a ''fixed'' background is fixed
      with respect to the <a href="http://www.w3.org/TR/CSS21/page.html#page-box">page box</a>
      and therefore replicated on every page.
      <p class="note">Note that there is only one viewport per view.
      Even if an element has a scrolling mechanism (see  the 'overflow'
      property [[!CSS21]]), a ''fixed'' background doesn't move with the
      element.
  <dt><dfn>local</dfn></dt>
    <dd>The mask is fixed with regard to the element's contents:
      if the element has a scrolling mechanism, the mask scrolls
      with the element's contents.
  <dt><dfn>scroll</dfn></dt>
    <dd>The mask is fixed with regard to the element itself and
      does not scroll with its contents. (It is effectively attached
      to the element's border.)</dd>
</dl>

<p>Even if the image is fixed, it is still only visible when it is in
the <em class=index>mask painting area</em> of the element.

<div class="example">
<p>This example creates an infinite vertical band that remains
“glued” to the viewport when the element is scrolled.

<pre>
body {
  mask: url("pendant.gif");
  mask-repeat: repeat-y;
  mask-attachment: fixed;
}
</pre>
</div>

<p>User agents that do not support ''fixed'' masks (for
example due to limitations of the hardware platform) should ignore
declarations with the keyword ''fixed''.

<div class="example">
<p>Example for browsers that ignore the keyword ''fixed''.

<pre>
body {
   /* For all UAs: */
   mask: white url(paper.png) scroll;
   /* For UAs that do fixed backgrounds: */
   mask: white url(ledger.png) fixed;
}
h1 {
   /* For all UAs: */
   mask: silver;
   /* For UAs that do fixed backgrounds: */
   mask: url(stripe.png) fixed, white url(ledger.png) fixed;
}
</pre>
</div>

<p>See the section <a href="#layering">“Layering multiple mask
images”</a> for how 'mask-attachment' interacts with other
comma-separated mask properties to form each mask image
layer.

<h2 id="the-mask-position">The 'mask-position' property</h2>

<table class="propdef">
    <tr>
      <th>Name:
      <td><dfn>mask-position</dfn>
    <tr>
      <th><a href="#values">Value</a>:

      <td><var>&lt;position&gt;</var>#
    <tr>
      <th>Initial:
      <td>0% 0%
    <tr>
      <th>Applies to:
      <td>All elements. In SVG, it applies to <a>container elements</a> and <a>graphics elements</a>
    <tr>
      <th>Inherited:
      <td>no
    <tr>
      <th>Percentages:
      <td>refer to size of <span class=index>mask painting area</span> <em>minus</em> size of mask image; see text
    <tr>
      <th>Media:
      <td>visual
    <tr>
      <th>Computed value:
      <td>A list, each item consisting of:
        two keywords representing the origin and two offsets from that
        origin, each given as an absolute length (if given a &lt;length&gt;),
        otherwise as a percentage.
    <tr>
      <th>Animatable:
      <td>yes
</table>

<p>If mask images have been specified, this property specifies
their initial position (after any <a href="#the-mask-size">resizing</a>)
within their corresponding <span class=index>mask painting area</span>.

<p>Where
<pre class=prod><dfn><var>&lt;position&gt;</var></dfn> = [
  [ left | center | right | top | bottom | <var>&lt;percentage&gt;</var> | <var>&lt;length&gt;</var> ]
|
  [ left | center | right | <var>&lt;percentage&gt;</var> | <var>&lt;length&gt;</var> ]
  [ top | center | bottom | <var>&lt;percentage&gt;</var> | <var>&lt;length&gt;</var> ]
|
  [ center | [ left | right ] [ <var>&lt;percentage&gt;</var> | <var>&lt;length&gt;</var> ]? ] &amp;&amp;
  [ center | [ top | bottom ] [ <var>&lt;percentage&gt;</var> | <var>&lt;length&gt;</var> ]? ]
]</pre>

<p>If only one value is specified, the second value is assumed to be
''center''. If two values are given, a length or percentage as the first
value represents the horizontal position (or offset) and a length or
percentage as the second value represents the vertical position (or
offset). <var>&lt;percentage&gt;</var> and <var>&lt;length&gt;</var>
values here represent an offset of the top left corner
of the mask image from the top left corner of the <span class=index>mask painting area</span>.

<p class="note">Note that a pair of keywords can be reordered while
a combination of keyword and length or percentage cannot. 
So ''center left'' is valid while ''50% left'' is not.

<p>If three or four values are given, then
each <var>&lt;percentage&gt;</var> or<var>&lt;length&gt;</var>
represents an offset and must be preceded by a keyword,
which specifies from which edge the offset is given. For example,
''mask-position: bottom 10px right 20px'' represents a
''10px'' vertical offset up from the bottom edge and a
''20px'' horizontal offset leftward from the right edge. If
three values are given, the missing offset is assumed to be zero.

<p>Positive values represent an offset <em>inward</em> from the edge of
the mask painting area. Negative values represent an offset
<em>outward</em> from the edge of the mask painting area.

<div class="example">
  <p>The following declarations give the stated (horizontal, vertical)
    offsets from the top left corner:</p>
  <pre>
 mask-position: left 10px top 15px;   /* 10px, 15px */
 mask-position: left      top     ;   /*  0px,  0px */
 mask-position:      10px     15px;   /* 10px, 15px */
 mask-position: left          15px;   /*  0px, 15px */
 mask-position:      10px top     ;   /* 10px,  0px */
 mask-position: left      top 15px;   /*  0px, 15px */
 mask-position: left 10px top     ;   /* 10px,  0px */</pre>
</div>

<dl>
  <dt><var>&lt;percentage&gt;</var>

  <dd><p>A percentage for the horizontal offset is relative to (<var>width of
    mask painting area</var> - <var>width of mask image</var>).
    A percentage for the vertical offset is relative to (<var>height
    of mask painting area</var> - <var>height of mask image</var>), where the
    size of the image is the size given by 'mask-size'.
    <div class=example>
      <p>For example, with a value pair of ''0% 0%'', the upper left
      corner of the image is aligned with the upper left corner of, usually,
      the box's padding edge. A value pair of ''100% 100%'' places
      the lower right corner of the image in the lower right corner of the
      area. With a value pair of ''75% 50%'', the point 75% across
      and 50% down the image is to be placed at the point 75% across and 50%
      down the area.
      <div class="figure">
      <p><img alt="Diagram of image position within element" src="images/bg-pos.png">
      <p class="caption">Diagram of the meaning of ''mask-position: 75% 50%''.
      </div>
    </div>

  <dt><var>&lt;length&gt;</var>

  <dd>A length value gives a fixed length as the offset. For example, with a
    value pair of ''2cm 1cm'', the upper left corner of the image
    is placed 2cm to the right and 1cm below the upper left corner of the
    mask painting area.

  <dt><dfn title="''top''!!'mask-position' value">''top''</dfn>

  <dd>Computes to ''0%'' for the vertical position if one or two
    values are given, otherwise specifies the top edge as the origin for the
    next offset.

  <dt><dfn title="''right''!!'mask-position' value">''right''</dfn>

  <dd>Computes to ''100%'' for the horizontal position if one or two
    values are given, otherwise specifies the right edge as the origin
    for the next offset.

  <dt><dfn title="''bottom''!!'mask-position' value">''bottom''</dfn>

  <dd>Computes to ''100%'' for the vertical position if one or two
    values are given, otherwise specifies the bottom edge as the origin
    for the next offset.

  <dt><dfn title="''left''!!'mask-position' value">''left''</dfn>

  <dd>Computes to ''0%'' for the horizontal position if one or two
    values are given, otherwise specifies the left edge as the origin
    for the next offset.

  <dt><dfn title="''center''!!'mask-position' value">''center''</dfn>

  <dd>Computes to ''50%'' (''left 50%'') for the
    horizontal position if the horizontal position is not otherwise
    specified, or ''50%'' (''top 50%'') for the vertical position if
    it is.
</dl>

<div class="example">
  <p>The following 'mask' shorthand declarations use keywords
  to set 'mask-position' to the stated percentage values.</p>
  <pre>
body { mask: url("banner.jpeg") right top }    /* 100%   0% */
body { mask: url("banner.jpeg") top center }   /*  50%   0% */
body { mask: url("banner.jpeg") center }       /*  50%  50% */
body { mask: url("banner.jpeg") bottom }       /*  50% 100% */
</pre>
</div>

<div class="example">
  <p>In the example below, the (single) image is placed in the lower-right
  corner of the viewport.
  <pre>
body {
  mask-image: url("logo.png");
  mask-attachment: fixed;
  mask-position: 100% 100%;
  mask-repeat: no-repeat;
}
</pre>
</div>

<div class=example>
<p>Mask positions can also be relative to other corners than the
top left. E.g., the following puts the background image 10px from the
bottom and 3em from the right:

<pre>mask-position: right 3em bottom 10px</pre>
</div>

<p>See the section <a href="#layering">“Layering multiple mask
images”</a> for how 'mask-position' interacts with other
comma-separated mask properties to form each mask image
layer.

<h2 id="the-mask-clip">The 'mask-clip' property</h2>

<table class="propdef">
    <tr>
      <th>Name:
      <td><dfn>mask-clip</dfn>
    <tr>
      <th><a href="#values">Value</a>:
      <td><var>&lt;box&gt;</var>#
    <tr>
      <th>Initial:
      <td>border-box
    <tr>
      <th>Applies to:
      <td>All elements. In SVG, it applies to <a>container elements</a> and <a>graphics elements</a>
    <tr>
      <th>Inherited:
      <td>no
    <tr>
      <th>Percentages:
      <td>N/A
    <tr>
      <th>Media:
      <td>visual
    <tr>
      <th>Computed value:
      <td>as specified
    <tr>
      <th>Animatable:
      <td>no
</table>

<p>Determines the <dfn id="mask-painting-area">mask painting area</dfn>,
which determines the area that is affected by the mask.
The syntax of the property is given with

<pre class=prod><dfn><var>&lt;box&gt;</var></dfn> = border-box | padding-box | content-box</pre>

<p>Values have the following meanings:

<dl>
  <dt><dfn title="''border-box''!!'mask-clip' value">
      ''border-box''</dfn></dt>
  <dd>The mask is rectricted to (clipped to) the
    <span>border box.</span>
  <dt><dfn title="''padding-box''!!'mask-clip' value">
      ''padding-box''</dfn></dt>
  <dd>The mask is rectricted to (clipped to) the
    <span>padding box.</span>
  <dt><dfn title="''content-box''!!'mask-clip' value">
      ''content-box''</dfn></dt>
  <dd>The mask is rectricted to (clipped to) the
    <span>content box.</span>
</dl>

<p class=note>Note that SVG elements without an associated CSS layout box don't have a ''border-box'' or ''padding-box'' and ''content-box'' is used as mask painting area instead.

<p>See the section <a href="#layering">“Layering multiple mask
images”</a> for how 'mask-clip' interacts with other
comma-separated mask properties to form each mask image
layer.

<h2 id="the-mask-origin">The 'mask-origin' property</h2>

<table class="propdef">
    <tr>
      <th>Name:
      <td><dfn>mask-origin</dfn>
    <tr>
      <th><a href="#values">Value</a>:
      <td><var>&lt;box&gt;</var>#
    <tr>
      <th>Initial:
      <td>padding-box
    <tr>
      <th>Applies to:
      <td>All elements. In SVG, it applies to <a>container elements</a> and <a>graphics elements</a>
    <tr>
      <th>Inherited:
      <td>no
    <tr>
      <th>Percentages:
      <td>N/A
    <tr>
      <th>Media:
      <td>visual
    <tr>
      <th>Computed value:
      <td>as specified
    <tr>
      <th>Animatable:
      <td>no
</table>

<p>For elements rendered as a single box, specifies the
<dfn id="mask-positioning-area">mask positioning area</dfn>.
For elements rendered as multiple boxes (e.g., inline boxes on several
lines, boxes on several pages) specifies which boxes 'box-decoration-break'
operates on to determine the mask positioning area(s).

<dl>
  <dt><dfn title="''padding-box''!!'mask-origin' value">
      ''padding-box''</dfn>
  <dd>The position is relative to the padding box. (For single boxes
    ''0 0'' is the upper left corner of the padding edge,
    ''100% 100%'' is the lower right corner.)
  <dt><dfn title="''border-box''!!'mask-origin' value">
      ''border-box''</dfn>
  <dd>The position is relative to the border box.
  <dt><dfn>''content-box''</dfn>
  <dd>The position is relative to the content box.
</dl>

<p>If the 'mask-attachment' value for this image is
''fixed'', then this property has no effect: in this case the
mask positioning area is the
<a href="http://www.w3.org/TR/CSS21/visudet.html#containing-block-details">initial containing block</a> [[!CSS21]].

<p class="note">Note that if 'mask-clip' is ''padding-box'',
'mask-origin' is ''border-box'', 'mask-position' is
''top left'' (the initial value), and the element has a
non-zero border, then the top and left of the mask image will be
clipped.

<p class=note>Note that SVG elements without an associated CSS layout box don't have a ''border-box'' or ''padding-box'' and ''content-box'' is used as mask positioning area instead.

<p>See the section <a href="#layering">“Layering multiple mask
images”</a> for how 'mask-origin' interacts with other
comma-separated mask properties to form each mask image
layer.


<h2 id="the-mask-size">The 'mask-size' property</h3>

<table class="propdef">
    <tr>
      <th>Name:
      <td><dfn>mask-size</dfn>
    <tr>
      <th><a href="#values">Value</a>:
      <td><var>&lt;mask-size&gt;</var>#
    <tr>
      <th>Initial:
      <td>auto
    <tr>
      <th>Applies to:
      <td>All elements. In SVG, it applies to <a>container elements</a> and <a>graphics elements</a>
    <tr>
      <th>Inherited:
      <td>no
    <tr>
      <th>Percentages:
      <td>see text
    <tr>
      <th>Media:
      <td>visual
    <tr>
      <th>Computed value:
      <td>as specified, but with lengths made absolute
    <tr>
      <th>Animatable:
      <td>yes except keyword values
</table>

<p>Specifies the size of the mask images. Where

<pre class=prod><dfn><var>&lt;mask-size&gt;</var></dfn> = [ <var>&lt;length&gt;</var> | <var>&lt;percentage&gt;</var> | auto ]{1,2} | cover | contain</pre>

<p>Values have the following meanings:

<dl>
  <dt><dfn>''contain''</dfn></dt>
  <dd>Scale the image, while preserving its intrinsic aspect ratio
    (if any), to the largest size such that both its width and its
    height can fit inside the <span class=index>mask
    positioning area.</span></dd>

  <dt><dfn>''cover''</dfn></dt>
  <dd>Scale the image, while preserving its intrinsic aspect ratio
    (if any), to the smallest size such that both its width and its
    height can completely cover the mask positioning area.</dd>

  <dt>[ <var>&lt;length&gt;</var> | <var>&lt;percentage&gt;</var>
  | <dfn title="''auto''!!'mask-size' value">auto</dfn> ]{1,2}</dt>
  <dd>
    <p>The first value gives the width of the corresponding image,
    the second value its height. If only one value is given the second
    is assumed to be ''auto''.

    <p>A percentage is relative to the background positioning area.

    <p>An ''auto'' value for one dimension is resolved by using the
    image's intrinsic ratio and the size of the other dimension, or
    failing that, using the image's intrinsic size, or failing that,
    treating it as 100%.

    <p>If both values are ''auto'' then the intrinsic width and/or
    height of the image should be used, if any, the missing dimension
    (if any) behaving as ''auto'' as described above. If the image has
    neither an intrinsic width nor an intrinsic height, its size is
    determined as for ''contain''.

    <p>Negative values are not allowed.
  </dd>
</dl>

<div class="example">
<p>Here are some examples. The first example stretches the mask
image independently in both dimensions to completely cover the content
area:

<pre>
div {
    mask-image: url(plasma.png);
    mask-repeat: no-repeat;
    mask-size: 100% 100%;
    mask-origin: content-box }
</pre>

<p>The second example stretches the image so that exactly two copies
fit horizontally. The aspect ratio is preserved:

<pre>
p {
    mask-image: url(tubes.png);
    mask-size: 50% auto;
    mask-origin: border-box }
</pre>

<p>This example forces the mask image to be 15 by 15 pixels:

<pre>
para {
    mask-size: 15px 15px;
    mask-image: url(tile.png)}
</pre>

<p>This example uses the image's intrinsic size. Note that this is the
only possible behavior in CSS level&nbsp;1 and 2.

<pre>
body {
    mask-size: auto;            /* default */
    mask-image: url(flower.png) }
</pre>

<p>The following example rounds the height of the image to 33.3%, up
from the specified value of 30%. At 30%, three images would fit
entirely and a fourth only partially. After rounding, three images
fit. The width of the image is 20% of the mask area width and is
not rounded.

<pre>
p {
    mask-image: url(chain.png);
    mask-repeat: no-repeat round;
    mask-size: 20% 30% }
</pre>
</div>

<p>If 'mask-repeat' is ''round'' for one (or both) dimensions,
there is a second step. The UA must scale the image in that dimension
(or both dimensions) so that it fits a whole number of times in
the mask positioning area. In the case of the width (height is
analogous):

<blockquote>
  <p>If <var>X</var> &ne; 0 is the width of the image after step one
  and <var>W</var> is the width of the mask positioning area,
  then the rounded width
  <var>X'</var> = <var>W</var> / round(<var>W</var> / <var>X</var>)
  where round() is a function that returns the nearest natural number
  (integer greater than zero).
</blockquote>

<p>If 'mask-repeat' is ''round'' for one dimension only and if
'mask-size' is ''auto'' for the other dimension, then there is a third
step: that other dimension is scaled so that the original aspect ratio
is restored.

<div class=example>
<p>In this example the mask image is shown at its intrinsic size:

<pre>
div {
  mask-image: url(image1.png);
  mask-repeat: repeat;         /* default */
  mask-size: auto }            /* default */
</pre>

<p>In the following example, the mask is shown with a width of
3em and its height is scaled proportionally to keep the original
aspect ratio:

<pre>
div {
  mask-image: url(image2.png);
  mask-repeat: repeat;         /* default */
  mask-size: 3em }             /* = '3em auto' */
</pre>

<p>In the following example, the mask is shown with a width of
approximately 3em: scaled so that it fits a whole number of times in
the width of the mask. The height is scaled proportionally to
keep the original aspect ratio:

<pre>
div {
  mask-image: url(image3.png);
  mask-repeat: round repeat;
  mask-size: 3em auto }
</pre>

<p>In the following example, the mask image is shown with a
width of 3em and a height that is either the height corresponding to
that width at the original aspect ratio or slightly less:

<pre>
div {
  mask-image: url(image4.png);
  mask-repeat: repeat round;
  mask-size: 3em auto }
</pre>

<p>In the following example, the mask image is shown with a
height of approximately 4em: scaled slightly so that it fits a whole
number of times in the mask height. The width is the approximately
the width that correspond to a 4em height at the original aspect ratio:
scaled slightly so that it fits a whole number of times in the mask
width.

<pre>
div {
  mask-image: url(image5.png);
  mask-repeat: round;
  mask-size: auto 4em }
</pre>
</div>

<p>If the mask image's width or height resolves to zero, this
causes the image not to be displayed. (The effect is the same as
if it had been a transparent image.)

<p>See the section <a href="#layering">“Layering multiple mask
images”</a> for how 'mask-size' interacts with other
comma-separated mask properties to form each mask image
layer.

<h2 id="the-mask-type">The 'mask-type' property</h3>

<table class="propdef">
    <tr>
      <th>Name:
      <td><dfn>mask-type</dfn>
    <tr>
      <th><a href="#values">Value</a>:
      <td><var>&lt;mask-type&gt;</var>
    <tr>
      <th>Initial:
      <td>auto
    <tr>
      <th>Applies to:
      <td>All elements. In SVG, it applies to <a>container elements</a> and <a>graphics elements</a>
    <tr>
      <th>Inherited:
      <td>no
    <tr>
      <th>Percentages:
      <td>N/A
    <tr>
      <th>Media:
      <td>visual
    <tr>
      <th>Computed value:
      <td>as specified
    <tr>
      <th>Animatable:
      <td>yes except keyword values
</table>

<p>The mask type determines which of the methods described in <a
href="#MaskValues">Calculating mask values</a> should be used for calculating
mask values from the mask source / the layer of mask images. Where

<pre class=prod><dfn><var>&lt;mask-type&gt;</var></dfn> = luminance | alpha | auto</pre>

<p>Values have the following meanings:

<dl>
  <dt><dfn>''luminance''</dfn></dt>
  <dd>Indicates that the luminance values of the mask should be used.</dd>

  <dt><dfn>''alpha''</dfn></dt>
  <dd>Indicates that the alpha values of the mask should be used.</dd>

  <dt><dfn>''auto''</dfn></dt>
  <dd>If the mask references a <a>'mask element'</a> element, the method used for calculating the
    mask values is determined by the 'maskType' attribute on the <a>'mask element'</a> element.
    Otherwise, the alpha values of the mask should be used.
    <p class=issue>Should the default be ''luminance'' instead?</dd>
</dl>

<p>See the section <a href="#layering">“Layering multiple mask
images”</a> for how 'mask-type' interacts with other
comma-separated mask properties to form each mask image
layer.

<h2 id="mask-property">The 'mask' property</h2>

<table class="propdef">
  <tr>
    <th>Name:</th>
    <td><dfn id="MaskProperty">mask</dfn></td>
  </tr>
  <tr>
    <th>Value:</th>
    <td>[ <var>&lt;mask-source&gt;</var> | <var>&lt;mask-layer&gt;</var># ] <var>&lt;mask-type&gt;</var>?</td>
  </tr>
  <tr>
    <th>Initial:</th>
    <td>see individual properties</td>
  </tr>
  <tr>
    <th>Applies to:</th>
    <td>All elements. In SVG, it applies to <a>container elements</a> and <a>graphics elements</a></td>
  </tr>
  <tr>
    <th>Inherited:</th>
    <td>no</td>
  </tr>
  <tr>
    <th>Percentages:</th>
    <td>see individual properties</td>
  </tr>
  <tr>
    <th>Media:</th>
    <td>visual</td>
  </tr>
  <tr>
    <th>Computed&#160;value:</th>
    <td>see individual properties</td>
  </tr>
  <tr>
    <th><a>Animatable</a>:</th>
    <td>see individual properties</td>
  </tr>
</table>
<p>Where</p>

<pre class=prod><dfn><var>&lt;mask-layer&gt;</var></dfn> = &lt;mask-image&gt; || &lt;position&gt; [ / &lt;mask-size&gt; ]? || &lt;repeat-style&gt; || &lt;attachment&gt; || &lt;box&gt;{1,2}</pre>

<pre class=prod><dfn><var>&lt;mask-source&gt;</var></dfn> = <var>&lt;FuncIRI&gt;</var> |  child | select(<var>&lt;compound-selector&gt;</var>)</pre>

<dl>
  <dt>
    <a>&lt;FuncIRI&gt;</a>
  </dt>
  <dd>
    An <a>IRI reference</a>
    to a <a>'mask element'</a> element that defines the
    filter effect. For example ''url(commonmasks.xml#mask)''.
  </dd>
  <dt><dfn>''child''</dfn></dt>
  <dd>
    A keyword to indicate that the last child <a>'mask element'</a>
    element should be used as the mask source. It is equivalent to
    ''select(mask:last-of-type)''.</dd>
  <dt><dfn>''select(<var><a href="types.html#DataTypeCompoundSelector">&lt;compound-selector&gt;</a></var>)''</dfn></dt>
  <dd>A <var><a>&lt;compound-selector&gt;</a></var> scoped at the element to which the
    'mask' property is applied specifying the
    element to use as the mask source.
    As a result, only children of the target element may be used for the mask
    source.
  </dd>
</dl>

<div class="issue">
  <p>
    Need to define the parsing here since <a>&lt;FuncIRI&gt;</a> and
    <var>&lt;mask-image&gt;</var> overlap.
  </p>
  <p>
    Basically the process is that when there is a <code>url()</code> component:
  </p>
  <ol>
    <li>If the IRI contains a '#', look up the target.
      <ol>
        <li>If the target is a <a>'mask element'</a> element, follow the process
            outlined for <a href="#MaskElement">'mask'</a> elements.</li>
        <li>If the target is an SVG <a href="pservers.html">paint server</a>
            element, follow the process outlined for <a
            href="#SVGPaintServer">SVG paint server mask sources</a>.</li>
        <li>Otherwise, the mask source is invalid.</li>
      </ol>
    </li>
    <li>Otherwise, process as a <a>mask-image</a></li>
  </ol>
</div>

<p>An invalid or non-existent mask source gets ignored and no masking is applied.

<h2 id="MaskElement">The <span class="element-name">'mask'</span> element</h4>

<!--elementsummary mask-->

<edit:with element='mask'>

<edit:elementsummary name='mask'/>

    <div class="adef-list">
      <p><em>Attribute definitions:</em></p>
      <dl>
        <dt id="MaskElementMaskUnitsAttribute"><span
        class="adef">maskUnits</span> = "<em>userSpaceOnUse</em> |
        <em>objectBoundingBox</em>"</dt>
        <dd>Defines the coordinate system for attributes
        <a>'mask/x'</a>, <a>'mask/y'</a>, <a>'mask/width'</a> and <a>'mask/height'</a>.<br />
         If <span
        class="attr-value">maskUnits="userSpaceOnUse"</span>,
        <a>'mask/x'</a>, <a>'mask/y'</a>, <a>'mask/width'</a> and <a>'mask/height'</a>
        represent values in the current user coordinate system in place at
        the time when the <a>'mask element'</a>
        element is referenced (i.e., the user coordinate system for
        the element referencing the <a>'mask element'</a> element via the
        'mask' property).<br />
         If <span
        class="attr-value">maskUnits="objectBoundingBox"</span>,
        <a>'mask/x'</a>, <a>'mask/y'</a>, <a>'mask/width'</a> and <a>'mask/height'</a>
        represent fractions or percentages of the bounding box of
        the element to which the mask is applied. (See <span class="term">object bounding box
        units</span>.)<br />
         If attribute <a>'mask/maskUnits'</a> is
        not specified, then the effect is as if a value of <span
        class="attr-value">'objectBoundingBox'</span> were
        specified.<br />
         <span class="anim-target"><a
        href="animate.html#Animatable">Animatable</a>:
        yes.</span></dd>
        <dt id="MaskElementMaskContentUnitsAttribute"><span
        class="adef">maskContentUnits</span> =
        "<em>userSpaceOnUse</em> | <em>objectBoundingBox</em>"</dt>
        <dd>Defines the coordinate system for the contents of the
        <a>'mask element'</a>.<br />
         If <span
        class="attr-value">maskContentUnits="userSpaceOnUse"</span>,
        the user coordinate system for the contents of the
        <a>'mask element'</a> element is the current
        user coordinate system in place at the time when the
        <a>'mask element'</a> element is referenced
        (i.e., the user coordinate system for the element
        referencing the <a>'mask element'</a>
        element via the 'mask'
        property).<br />
         If <span
        class="attr-value">maskContentUnits="objectBoundingBox"</span>,
        the user coordinate system for the contents of the <a>'mask element'</a> is established using the
        bounding box of the element to which the mask is applied.
        (See <span class="term">object bounding box
        units</span>.)<br />
         If attribute <a>'maskContentUnits'</a> is not specified,
        then the effect is as if a value of <span
        class="attr-value">'userSpaceOnUse'</span> were
        specified.<br />
         <span class="anim-target"><a
        href="animate.html#Animatable">Animatable</a>:
        yes.</span></dd>
        <dt id="MaskElementMaskTypeAttribute"><span
        class="adef">maskType</span> =
        "<em>luminance</em> | <em>alpha</em>"</dt>
        <dd>
         Defines the procedure used for calculating mask values from the
        contents of the mask as described in <a href="#MaskValues">Calculating
        mask values</a>.
        <br />
        If attribute <a>'mask/maskType'</a> is not specified,
        then the effect is as if a value of <span
        class="attr-value">'luminance'</span> were
        specified.<br />
         <span class="anim-target"><a
        href="animate.html#Animatable">Animatable</a>:
        yes.</span>
        <div class="annotation">
          Although authors may find <span class="attr-value">'alpha'</span> more
          intuitive, the default value is <span
          class="attr-value">'luminance'</span> to provide backwards
          compatibility with SVG 1.1.
        </div>
        </dd>
        <dt id="MaskElementXAttribute"><span
        class="adef">x</span> = "<span class="attr-value"><a
        href="types.html#DataTypeCoordinate">&lt;coordinate&gt;</a></span>"</dt>
        <dd>The x-axis coordinate of one corner of the rectangle
        for the largest possible offscreen buffer. Note that the
        clipping path used to render any graphics within the mask
        will consist of the intersection of the current clipping
        path associated with the given object and the rectangle
        defined by 
        <a>'mask/x'</a>, <a>'mask/y'</a>, <a>'mask/width'</a> and <a>'mask/height'</a>.<br />
         If the attribute is not specified, the effect is as if a
        value of <span class='attr-value'>'-10%'</span> were specified.<br />
         <span class="anim-target"><a
        href="animate.html#Animatable">Animatable</a>:
        yes.</span></dd>
        <dt id="MaskElementYAttribute"><span
        class="adef">y</span> = "<span class="attr-value"><a
        href="types.html#DataTypeCoordinate">&lt;coordinate&gt;</a></span>"</dt>
        <dd>The y-axis coordinate of one corner of the rectangle
        for the largest possible offscreen buffer.<br />
         If the attribute is not specified, the effect is as if a
        value of <span class='attr-value'>'-10%'</span> were specified.<br />
         <span class="anim-target"><a
        href="animate.html#Animatable">Animatable</a>:
        yes.</span></dd>
        <dt id="MaskElementWidthAttribute"><span
        class="adef">width</span> = "<span class="attr-value"><a
        href="types.html#DataTypeLength">&lt;length&gt;</a></span>"</dt>
        <dd>The width of the largest possible offscreen buffer.
        Note that the clipping path used to render any graphics
        within the mask will consist of the intersection of the
        current clipping path associated with the given object and
        the rectangle defined by
        <a>'mask/x'</a>, <a>'mask/y'</a>, <a>'mask/width'</a> and <a>'mask/height'</a>.<br />
        A negative value or a value of zero disables rendering of the element.<br />
         If the attribute is not specified, the effect is as if a
        value of <span class='attr-value'>'120%'</span> were specified.<br />
         <span class="anim-target"><a
        href="animate.html#Animatable">Animatable</a>:
        yes.</span></dd>
        <dt id="MaskElementHeightAttribute"><span
        class="adef">height</span> = "<span class="attr-value"><a
        href="types.html#DataTypeLength">&lt;length&gt;</a></span>"</dt>
        <dd>The height of the largest possible offscreen
        buffer.<br />
         A negative value or a value of zero disables rendering of the element.<br />
         If the attribute is not specified, the effect is as if a
        value of <span class='attr-value'>'120%'</span> were specified.<br />
         <span class="anim-target"><a
        href="animate.html#Animatable">Animatable</a>:
        yes.</span></dd>
      </dl>
    </div>

<p><a href="styling.html#SVGStylingProperties">Properties</a> inherit into the
<a>'mask element'</a> element from its ancestors; properties do <em>not</em>
inherit from the element referencing the <a>'mask element'</a> element.</p>

<p><a>'mask element'</a> elements are never rendered directly; their only
usage is as something that can be referenced using the 'mask'
property. The 'opacity', 'filter' and 'display' properties do not apply to the
<a>'mask element'</a> element; thus, <a>'mask element'</a> elements are not
directly rendered even if the 'display' property is set to a value
other than 'none', and <a>'mask element'</a>
elements are available for referencing even when the 'display' property
on the <a>'mask element'</a> element or any of its ancestors is set to
<span class="prop-value">none</span>.</p>

<h2 id="SVGPaintServer">SVG Paint Servers as Mask Sources</h2>

<p>
Besides an SVG <a>'mask element'</a> element, the 'mask' property may
also refer to an SVG <a href="pservers.html">paint server</a> element such as
a <a>'linearGradient'</a> element or <a>'pattern'</a> element.
When the mask source is an SVG paint server, the effect is as if the following
steps were performed:
</p>

<ol>
  <li>Create a new <a>'mask element'</a> element as a sibling of the
      paint server element.</li>
  <li>Let the <a>'mask/maskUnits'</a> attribute be <span
      class="attr-value">'userSpaceOnUse'</span>.</li>
  <li>Let the dimensions of the mask 
      (<a>'mask/x'</a>, <a>'mask/y'</a>, <a>'mask/width'</a>,
      and <a>'mask/height'</a>) match the dimensions of the
      <a>decorated bounding box</a> of the mask target.</li>
  <li>Let the <a>'mask/maskContentUnits'</a> attribute be <span
      class="attr-value">'objectBoundingBox'</span>.</li>
  <li>Create a new <a>'rect'</a> element as a child of the newly
      created <a>'mask element'</a> element.</li>
  <li>Let both the width and the height of the <a>'rect'</a> element be
      <span class="attr-value">'100%'</span>.</li>
  <li>Let the <a>'fill'</a> property of the <a>'rect'</a> element
      refer to the paint server element.</li>
  <li>Use the newly created <a>'mask element'</a> as the mask source.</li>
</ol>

</edit:with>

<h2 class=no-num id="references">
References</h2>

<h3 class="no-num" id="normative-references">
Normative references</h3>
<!--normative-->

<h3 class="no-num" id="other-references">
Other references</h3>
<!--informative-->

<h2 class="no-num" id="index">
Index</h2>
<!--index-->

<h2 class="no-num" id="property-index">
Property index</h2>
<!-- properties -->

</body>
</html>
<!-- Keep this comment at the end of the file
Local variables:
mode: sgml
sgml-declaration:"~/SGML/HTML4.decl"
sgml-default-doctype-name:"html"
sgml-minimize-attributes:t
sgml-nofill-elements:("pre" "style" "br")
sgml-live-element-indicator:t
sgml-omittag:nil
sgml-shorttag:nil
sgml-namecase-general:t
sgml-general-insert-case:lower
sgml-always-quote-attributes:t
sgml-indent-step:nil
sgml-indent-data:t
sgml-parent-document:nil
sgml-exposed-tags:nil
sgml-local-catalogs:nil
sgml-local-ecat-files:nil
End:
-->
 

